<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chartMapper">
	<!-- 최근 7일간에 해당하면 매출데이터중에 store_id에 해당하는 값 -->
	<select id="DailyTotalAmount" resultType="ChartVO">
		SELECT
		DATE(requestedAt) AS date,
		SUM(amount) AS total_amount
		FROM
		payment
		WHERE
		DATE(requestedAt) BETWEEN CURDATE() - INTERVAL 7 DAY AND CURDATE()
		AND store_id = #{storeId}
		GROUP BY
		DATE(requestedAt)
		ORDER BY
		DATE(requestedAt);
	</select>
	<!-- 현재날짜기준 1달전부터 1달전의 7일후까지의 데이터 -->
	<select id="XTotalAmount" resultType="ChartVO">
		SELECT
		DATE(requestedAt) AS date,
		SUM(amount) AS total_amount
		FROM
		payment
		WHERE
		DATE(requestedAt) BETWEEN DATE_SUB(DATE_SUB(CURDATE(), INTERVAL 1 MONTH), INTERVAL 7
		DAY) AND DATE_SUB(CURDATE(), INTERVAL 1 MONTH)
		AND store_id = #{storeId}
		GROUP BY
		DATE(requestedAt)
		ORDER BY
		DATE(requestedAt);
	</select>




</mapper>











